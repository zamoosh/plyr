<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="John Doe">
        <link rel="shortcut icon" href="" type="image/x-icon">
        
        <!-- css bootstrap -->
        <link rel="stylesheet" href="./static/assets/css/bootstrap.css">
        <link rel="stylesheet" href="./static/assets/css/bootstrap-icons/bootstrap-icons.css">
        
        <link rel="stylesheet" href="./static/assets/plugins/plyr/plyr.css" />
        
        <title>player</title>
        <style>
            .plyr__video-wrapper::before {
                position: absolute;
                top: 25px;
                left: 25px;
                z-index: 10;
                content: '';
                height: 16%;
                width: 11%;
                background: url('./static/assets/vidan-logo-shape.svg') no-repeat;
                opacity: 0.5;
            }
            
            .music {
                width: 100px;
            }
            
            .music_cover {
                height: 200px;
                width: 100%;
                position: relative;
                background-color: rgba(255, 255, 255, 0.06);
                border-radius: 5px 5px 0 0;
            }

            @keyframes round {
                from {
                    transform: rotate(0deg);
                }
                to {
                    transform: rotate(360deg);
                }
            }
            
            .cover_image {
                animation-name: round;
                animation-duration: 4s;
                animation-iteration-count: infinite;
                animation-timing-function: linear;
            }
            
            .paused {
                -webkit-animation-play-state: paused;
                -moz-animation-play-state: paused;
                -o-animation-play-state: paused;
                animation-play-state: paused;
            }
            
        </style>
    </head>
    <body style="background-color: #353535;">
        
        <div class="container-fluid">
            <div class="container mt-4">
                <!-- for movies -->
                <video playsinline
                       id="player"
                       controls
                       data-poster="">
                    <source src="./static/assets/videos/sea_640.mp4" type="video/mp4" size="640" />
                    <source src="./static/assets/videos/sea_960.mp4" type="video/mp4" size="960" />
                    <source src="./static/assets/videos/sea_1280.mp4" type="video/mp4" size="1280" />
                    
                    <!-- Captions are optional -->
                    <!-- <track kind="captions" label="English captions" src="/path/to/captions.vtt" srclang="en" default /> -->
                    <track src="">
                </video>
                
                <!-- for musics -->
                <br><br><br><br><br><br><br><br><br><br>
                <div class="w-100 d-flex justify-content-center">
                    <div class="w-50">
                        <div class="music_cover d-flex justify-content-center align-items-center">
                            <div class="cover_image paused text-center w-50">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                     width="90"
                                     height="90"
                                     fill="currentColor"
                                     class="bi bi-music-note-beamed"
                                     viewBox="0 0 16 16">
                                    <path d="M6 13c0 1.105-1.12 2-2.5 2S1 14.105 1 13c0-1.104 1.12-2 2.5-2s2.5.896 2.5 2zm9-2c0 1.105-1.12 2-2.5 2s-2.5-.895-2.5-2 1.12-2 2.5-2 2.5.895 2.5 2z" />
                                    <path fill-rule="evenodd" d="M14 11V2h1v9h-1zM6 3v10H5V3h1z" />
                                    <path d="M5 2.905a1 1 0 0 1 .9-.995l8-.8a1 1 0 0 1 1.1.995V3L5 4V2.905z" />
                                </svg>
                            </div>
                        </div>
                        <audio id="player1" controls class="music">
                            <source src="./static/assets/musics/34.%20Flower%20Tower%20(Custom%20Music%20by%20Jimmy).mp3" type="audio/mp3" />
                        </audio>
                    </div>
                </div>
            </div>
        </div>
    
        <script src="./static/assets/js/bootstrap.js"></script>
        <script src="./static/assets/js/bootstrap.bundle.js"></script>
        <script src="./static/assets/plugins/plyr/plyr.polyfilled.js"></script>
    
        <script>
            window.addEventListener('load', function () {
                let audio = new Plyr('#player1');

                const player = new Plyr('#player', {
                    settings: ['captions', 'quality', 'speed'],
                    controls: [
                        'play-large',
                        'play',
                        'rewind',
                        'fast-forward',
                        'restart',
                        'progress',
                        'current-time',
                        'mute', 'volume',
                        'captions',
                        'settings', 'pip',
                        'airplay',
                        'fullscreen',
                    ],
                    hideControls: false,
                    quality: {
                        default: 1280,
                        // The options to display in the UI, if available for the source media
                        options: [1280, 960, 640],
                        forced: true,
                        onChange: null
                    },
                    previewThumbnails: {
                        enabled: false,
                        src: ''
                    },
                    speed: {
                        selected: 1,
                        options: [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2, 4]
                    },
                    markers: {
                        enabled: true,
                        points: [
                            {time: 2, label: 'ali'},
                            {time: 9, label: 'sara'}
                        ]
                    },
                    captions: {
                        active: false,
                        language: 'auto',
                        update: false
                    },
                    tooltips: {
                        controls: true,
                        seek: true
                    },
                    clickToPlay: true
                });
                
                /* Adding comment bottom to player */
                let comment = document.createElement('button');
                comment.classList.add('plyr__controls__item')
                comment.classList.add('plyr__control')
                comment.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-text" viewBox="0 0 16 16">
                  <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
                  <path d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z"/>
                </svg>
                <span class="label--not-pressed plyr__tooltip">Add comment</span>
                `;
                let control_bar = document.getElementsByClassName('plyr__controls')[0];
                control_bar.appendChild(comment)
                
                
                /* Add an event listener for comment bottom */
                comment.addEventListener('click', function () {
                    let progress_bar = document.querySelector('div.plyr__progress');
                    let progress_input = progress_bar.childNodes[0];
                    let current_time = progress_input.getAttribute('aria-valuenow');
                    current_time = Math.floor(current_time * 100) / 100;
                    console.log(current_time);
                });
                
                function toggle_animation(element) {
                    if (element.classList.contains('paused'))
                        element.classList.remove('paused')
                    else
                        element.classList.add('paused')
                }
                
                audio.on('play', function () {
                    let cover_image = document.getElementsByClassName('cover_image')[0];
                    toggle_animation(cover_image)
                });
                
                audio.on('pause', function () {
                    let cover_image = document.getElementsByClassName('cover_image')[0];
                    toggle_animation(cover_image)
                });
                
                // player.source = {
                //     type: 'video',
                //     sources: [
                //         {
                //             src: 'bTqVqk7FSmY',
                //             provider: 'youtube'
                //         }
                //     ]
                // };
                
            });
        </script>
    </body>
</html>